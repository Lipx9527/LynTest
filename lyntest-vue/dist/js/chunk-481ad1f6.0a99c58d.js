(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-481ad1f6","chunk-2d229405"],{abab:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"edit"===e.type?"重命名":"添加",visible:e.dialogFormVisible,"before-close":e.close,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:18}},[n("el-form",{ref:"nodeForm",attrs:{model:e.form},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"模块名称","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.close}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveNode},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}}},[e._v("保 存")])],1)],1)},a=[],o=n("a34a"),i=n.n(o),s=n("dd3b");function u(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){u(o,r,a,i,s,"next",e)}function s(e){u(o,r,a,i,s,"throw",e)}i(void 0)})}}var l={data:function(){return{name:"node-edit",form:{name:""},type:"",node:{},nodeIds:[],formLabelWidth:"80px",dialogFormVisible:!1}},props:{treeNodes:{type:Array},currentProject:{type:Object}},methods:{open:function(e,t,n){this.type=e,this.node=t,"edit"===e&&(this.form.name=this.node.name),this.nodeIds=n,this.dialogFormVisible=!0},saveNode:function(){var e=c(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t={},t.name=this.form.name.trim(),t.label=this.form.name,t.project_id=this.currentProject.id,"add"!==this.type){e.next=12;break}return t.level=1,this.node&&(t.parent_id=this.node.id,t.level=this.node.level+1),e.next=9,s["default"].createNode(t);case 9:n=e.sent,e.next=19;break;case 12:if("edit"!==this.type){e.next=19;break}return t.id=this.node.id,t.level=this.node.level,t.nodeIds=this.nodeIds,e.next=18,s["default"].updateNode(t);case 18:n=e.sent;case 19:n.code<window.MAX_SUCCESS_CODE?(this.$message.success(n.message),this.$emit("refresh"),this.close()):this.$message.error("服务端异常");case 20:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.form.name="",this.dialogFormVisible=!1}}},d=l,f=n("2877"),p=Object(f["a"])(d,r,a,!1,null,"56d78c26",null);t["default"]=p.exports},dd3b:function(e,t,n){"use strict";n.r(t);var r=n("a34a"),a=n.n(r),o=n("ceda");function i(e,t,n,r,a,o,i){try{var s=e[o](i),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,u,"next",e)}function u(e){i(o,r,a,s,u,"throw",e)}s(void 0)})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}var d=function(){function e(){u(this,e)}return l(e,[{key:"createNode",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["post"])("/track/node/create",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getNodeByProjectId",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["get"])("/track/node/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateNode",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["post"])("/track/node/update",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteNodes",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["post"])("/track/node/delete",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"dragNode",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["post"])("/track/node/drag",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"nodePosition",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["post"])("/track/node/position",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=new d}}]);