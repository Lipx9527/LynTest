{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-76313f4a\",\"chunk-07249c9d\",\"chunk-6ad9c168\",\"chunk-e7e88524\",\"chunk-481ad1f6\",\"chunk-2d0f1594\",\"chunk-2d229405\",\"chunk-2d0c7d1d\"],{\"0bf7\":function(e,t,n){\"use strict\";var r=n(\"757f\"),a=n.n(r);a.a},\"1c4e\":function(e,t,n){},2066:function(e,t,n){\"use strict\";var r=n(\"1c4e\"),a=n.n(r);a.a},\"387e\":function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.result.loading,expression:\"result.loading\"}]},[n(\"el-input\",{attrs:{placeholder:\"模块搜索\",size:\"small\"},scopedSlots:e._u([\"edit\"===e.type?{key:\"append\",fn:function(){return[n(\"el-button\",{attrs:{disabled:e.disabled,icon:\"el-icon-folder-add\"},on:{click:function(t){return e.openEditNodeDialog(\"add\")}}})]},proxy:!0}:null],null,!0),model:{value:e.filterText,callback:function(t){e.filterText=t},expression:\"filterText\"}}),n(\"el-tree\",{ref:\"tree\",staticClass:\"node-tree\",attrs:{data:e.treeNodes,\"default-expanded-keys\":e.expandedNode,\"node-key\":\"id\",\"filter-node-method\":e.filterNode,\"expand-on-click-node\":!1,\"highlight-current\":\"\",draggable:e.draggable,props:e.defaultProps},on:{\"node-drag-end\":e.handleDragEnd,\"node-expand\":e.nodeExpand,\"node-collapse\":e.nodeCollapse},scopedSlots:e._u([{key:\"default\",fn:function(t){var r=t.node,a=t.data;return[n(\"span\",{staticClass:\"custom-tree-node father\",on:{click:function(t){return e.handleNodeSelect(r)}}},[n(\"span\",{staticClass:\"node-icon\"},[n(\"i\",{staticClass:\"el-icon-folder\"})]),n(\"span\",{staticClass:\"node-title\"},[e._v(e._s(r.label))]),\"edit\"!==e.type||e.disabled?e._e():n(\"span\",{staticClass:\"node-operate child\"},[n(\"el-tooltip\",{staticClass:\"item\",attrs:{effect:\"dark\",\"open-delay\":200,content:\"重命名\",placement:\"top\"}},[n(\"i\",{staticClass:\"el-icon-edit\",on:{click:function(t){return t.stopPropagation(),e.openEditNodeDialog(\"edit\",a)}}})]),n(\"el-tooltip\",{staticClass:\"item\",attrs:{effect:\"dark\",\"open-delay\":200,content:\"添加子模块\",placement:\"top\"}},[n(\"i\",{staticClass:\"el-icon-circle-plus-outline\",on:{click:function(t){return t.stopPropagation(),e.openEditNodeDialog(\"add\",a)}}})]),n(\"el-tooltip\",{staticClass:\"item\",attrs:{effect:\"dark\",\"open-delay\":200,content:\"删除\",placement:\"top\"}},[n(\"i\",{staticClass:\"el-icon-delete\",on:{click:function(t){return t.stopPropagation(),e.remove(r,a)}}})])],1)])]}}])}),n(\"node-edit\",{ref:\"nodeEdit\",attrs:{\"current-project\":e.currentProject,\"tree-nodes\":e.treeNodes},on:{refresh:e.refreshNode}}),n(\"el-dialog\",{attrs:{visible:e.confirmDeleteDialog,width:\"30%\"},on:{\"update:visible\":function(t){e.confirmDeleteDialog=t}}},[n(\"span\",[e._v(\"删除模块同时,其子模块及测试用例会全被删除，是否继续删除？\")]),n(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{on:{click:function(t){e.confirmDeleteDialog=!1}}},[e._v(\"取 消\")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.confirmRemove}},[e._v(\"确 定\")])],1)])],1)},a=[],o=n(\"a34a\"),i=n.n(o),s=n(\"abab\"),c=n(\"dd3b\");function l(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){l(o,r,a,i,s,\"next\",e)}function s(e){l(o,r,a,i,s,\"throw\",e)}i(void 0)})}}var d={name:\"node-tree\",components:{NodeEdit:s[\"default\"]},data:function(){return{result:{},expandedNode:[],filterText:\"\",defaultProps:{children:\"children\",label:\"name\"},disabled:!1,list:[],confirmDeleteDialog:!1,removeNodeIds:[]}},props:{type:{type:String,default:\"view\"},treeNodes:{type:Array},selectNode:{type:Object},draggable:{type:Boolean,default:!0},currentProject:{type:Object}},watch:{filterText:function(e){this.$refs.tree.filter(e)}},methods:{handleDragEnd:function(){var e=u(i.a.mark(function e(t,n,r){var a,o;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(\"none\"!==r&&void 0!==r){e.next=2;break}return e.abrupt(\"return\");case 2:return a=this.buildParam(t,n,r),this.list=[],this.getNodeTree(this.treeNodes,t.data.id,this.list),e.next=7,c[\"default\"].dragNode(a);case 7:if(o=e.sent,!(o.code<window.MAX_SUCCESS_CODE)){e.next=14;break}return e.next=11,c[\"default\"].nodePosition(this.list);case 11:this.$emit(\"refresh\"),e.next=15;break;case 14:this.$message.error(\"服务端异常\");case 15:case\"end\":return e.stop()}},e,this)}));function t(t,n,r){return e.apply(this,arguments)}return t}(),buildParam:function(e,t,n){var r,a=this;return 1===t.level&&\"inner\"!==n?r=e.data:this.treeNodes.some(function(e){return r=a.findTreeByNodeId(e,t.data.id),r}),r},getNodeTree:function(e,t,n){if(e)for(var r=0;r<e.length;r++){if(e[r].id===t)return n[0]=r-1>=0?e[r-1].id:0,n[1]=e[r].id,void(n[2]=r+1<e.length?e[r+1].id:0);e[r].children&&this.getNodeTree(e[r].children,t,n)}},refreshTable:function(){this.$emit(\"refreshTable\")},findTreeByNodeId:function(e,t){if(e.id===t)return e;if(e.children)for(var n=0;n<e.children.length;n++)if(this.findTreeByNodeId(e.children[n],t))return e},remove:function(e){var t=[];this.getChildNodeId(e.data,t),this.removeNodeIds=t,this.confirmDeleteDialog=!0},confirmRemove:function(){var e=u(i.a.mark(function e(){var t;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c[\"default\"].deleteNodes(this.removeNodeIds);case 2:t=e.sent,t.code<window.MAX_SUCCESS_CODE?(this.$message.success(t.message),this.$emit(\"refresh\"),this.confirmDeleteDialog=!1):this.$message.error(\"服务端异常\");case 4:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleNodeSelect:function(e){var t=[],n=[];this.getChildNodeId(e.data,t),this.getParentNodes(e,n),this.$emit(\"nodeSelectEvent\",t,n),this.$emit(\"update:selectNode\",e)},getChildNodeId:function(e,t){if(t.push(e.id),e.children)for(var n=0;n<e.children.length;n++)this.getChildNodeId(e.children[n],t)},getParentNodes:function(e,t){e.parent&&0!==e.parent.id&&this.getParentNodes(e.parent,t),e.data.name&&\"\"!==e.data.name&&t.push(e.data)},filterNode:function(e,t){return!e||-1!==t.name.indexOf(e)},openEditNodeDialog:function(e,t){var n=[];\"edit\"===e&&this.getChildNodeId(t,n),this.$refs.nodeEdit.open(e,t,n)},refreshNode:function(){this.$emit(\"refresh\")},nodeExpand:function(e){e.id&&this.expandedNode.push(e.id)},nodeCollapse:function(e){e.id&&this.expandedNode.splice(this.expandedNode.indexOf(e.id),1)}}},p=d,f=(n(\"8940\"),n(\"2877\")),h=Object(f[\"a\"])(p,r,a,!1,null,\"319ab471\",null);t[\"default\"]=h.exports},4268:function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"body\"},[n(\"el-card\",{staticClass:\"project-node-card\"},[n(\"select-menu\",{attrs:{data:e.projects,\"current-data\":e.currentProject},on:{dataChange:e.changeProject}}),n(\"node-tree\",{ref:\"nodeTree\",staticClass:\"node-tree\",attrs:{\"tree-nodes\":e.treeNodes,type:\"edit\",\"select-node\":e.selectNode,\"current-project\":e.currentProject,draggable:\"\"},on:{nodeSelectEvent:e.nodeChange,refresh:e.refresh,\"update:selectNode\":function(t){e.selectNode=t},\"update:select-node\":function(t){e.selectNode=t},refreshTable:e.refreshTable}})],1),n(\"el-card\",{staticClass:\"case-manage-card\"},[n(\"el-breadcrumb\",{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[n(\"el-breadcrumb-item\",[n(\"a\",[n(\"i\",{staticClass:\"el-icon-s-home breadcrumb\",on:{click:e.bachHome}})])]),e._l(e.selectParentNodes,function(t){return n(\"el-breadcrumb-item\",{key:t.id},[n(\"a\",{staticClass:\"breadcrumb\"},[e._v(e._s(t.name))])])})],2),n(\"el-row\",{staticClass:\"title_row\"},[n(\"div\",{staticClass:\"header-left\"},[n(\"el-button\",{staticClass:\"create-button\",attrs:{type:\"primary\",disabled:0===e.selectNodeIds.length},on:{click:e.handleCreate}},[e._v(\"创建用例\")])],1),n(\"div\",{staticClass:\"header-right\"},[n(\"lyn-search\",{attrs:{placeholder:\"用例名筛选\"},on:{change:e.refreshTable},model:{value:e.search.case_name,callback:function(t){e.$set(e.search,\"case_name\",t)},expression:\"search.case_name\"}}),n(\"el-pagination\",{attrs:{background:\"\",\"current-page\":e.search.page,\"page-size\":e.search.count,\"page-sizes\":[10,20,50,100],total:e.total,layout:\"total, sizes, prev, pager, next\"},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1)]),n(\"el-table\",{staticClass:\"case-table\",attrs:{data:e.caseList,stripe:\"\"}},[n(\"el-table-column\",{attrs:{prop:\"id\",label:\"id\",width:\"60\",\"show-overflow-tooltip\":\"\"}}),n(\"el-table-column\",{attrs:{prop:\"name\",label:\"用例名称\",\"show-overflow-tooltip\":\"\",width:\"120\"}}),n(\"el-table-column\",{attrs:{prop:\"description\",label:\"描述\",\"show-overflow-tooltip\":\"\",width:\"60\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[t.row.description?n(\"el-tooltip\",{attrs:{effect:\"dark\",placement:\"top-start\"}},[n(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[e._v(e._s(t.row.description))]),n(\"l-icon\",{attrs:{name:\"read\",color:\"#409EFF\",height:\"1.6em\",width:\"1.6em\"}})],1):n(\"l-icon\",{attrs:{name:\"read\",color:\"#ccc\",height:\"1.6em\",width:\"1.6em\"}})]}}])}),n(\"el-table-column\",{attrs:{prop:\"priority\",\"column-key\":\"priority\",label:\"优先级\",\"show-overflow-tooltip\":\"\",filters:e.priorityList,\"filter-method\":e.priorityFilter,\"filter-placement\":\"bottom-end\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[n(\"el-tag\",{attrs:{type:e.getPriorityStyle(t.row.priority),effect:\"dark\"}},[e._v(e._s(t.row.priority))])],1)]}}])}),n(\"el-table-column\",{attrs:{prop:\"type\",label:\"类型\",\"show-overflow-tooltip\":\"\",width:\"120\"}}),n(\"el-table-column\",{attrs:{prop:\"review_status\",label:\"评审状态\",filters:e.reviewStatusList,\"filter-method\":e.reviewStatusFilter,\"filter-placement\":\"bottom-end\",width:\"120\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"span\",[\"Prepare\"===t.row.review_status?n(\"el-tag\",{attrs:{type:\"info\"}},[e._v(\"未评审\")]):e._e(),\"Pass\"===t.row.review_status?n(\"el-tag\",{attrs:{type:\"success\"}},[e._v(\"通过\")]):e._e(),\"UnPass\"===t.row.review_status?n(\"el-tag\",{attrs:{type:\"danger\"}},[e._v(\"未通过\")]):e._e()],1)]}}])}),n(\"el-table-column\",{attrs:{prop:\"update_time\",label:\"更新时间\",\"show-overflow-tooltip\":\"\"}}),n(\"el-table-column\",{attrs:{fixed:\"right\",width:\"160\",label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-tooltip\",{attrs:{content:\"编辑\",placement:\"bottom\",enterable:!1,effect:\"dark\"}},[n(\"el-button\",{attrs:{size:\"small\",type:\"primary\",icon:\"el-icon-edit\",circle:\"\"},on:{click:function(n){return e.handleEdit(t.row)}}})],1),n(\"el-tooltip\",{attrs:{content:\"复制\",placement:\"bottom\",enterable:!1,effect:\"dark\"}},[n(\"el-button\",{attrs:{size:\"small\",type:\"warning\",icon:\"el-icon-document-copy\",circle:\"\"},on:{click:function(n){return e.handleCopy(t.row)}}})],1),n(\"el-tooltip\",{attrs:{content:\"删除\",placement:\"bottom\",enterable:!1,effect:\"dark\"}},[n(\"el-button\",{attrs:{size:\"small\",type:\"danger\",icon:\"el-icon-delete\",circle:\"\"},on:{click:function(n){return e.handleDelete(t.row.id)}}})],1)]}}])})],1)],1),n(\"el-dialog\",{attrs:{\"close-on-click-modal\":!1,title:1===e.operationType?\"创建用例\":\"用例编辑\",visible:e.editDialogVisible,width:\"65%\"},on:{\"update:visible\":function(t){e.editDialogVisible=t}}},[n(\"el-form\",{ref:\"caseInfo\",attrs:{model:e.caseInfo,\"label-width\":\"80px\"}},[n(\"el-row\",[n(\"el-col\",{attrs:{span:17,offset:1}},[n(\"el-form-item\",{attrs:{label:\"用例名称\",prop:\"name\"}},[n(\"el-input\",{staticClass:\"case-name\",attrs:{placeholder:\"请输入用例名称\"},model:{value:e.caseInfo.name,callback:function(t){e.$set(e.caseInfo,\"name\",t)},expression:\"caseInfo.name\"}})],1)],1)],1),n(\"el-row\",[n(\"el-col\",{attrs:{span:10,offset:1}},[n(\"el-form-item\",{attrs:{label:\"用例类型\",prop:\"type\"}},[n(\"el-select\",{attrs:{clearable:\"\"},model:{value:e.caseInfo.type,callback:function(t){e.$set(e.caseInfo,\"type\",t)},expression:\"caseInfo.type\"}},e._l(e.typeList,function(e){return n(\"el-option\",{key:e.index,attrs:{label:e,value:e}})}),1)],1)],1),n(\"el-col\",{attrs:{span:12}},[n(\"el-form-item\",{attrs:{label:\"用例等级\",prop:\"priority\"}},[n(\"el-select\",{attrs:{clearable:\"\"},model:{value:e.caseInfo.priority,callback:function(t){e.$set(e.caseInfo,\"priority\",t)},expression:\"caseInfo.priority\"}},e._l(e.priorityList,function(e){return n(\"el-option\",{key:e.index,attrs:{label:e.test,value:e.value}})}),1)],1)],1)],1),n(\"el-row\",{staticStyle:{\"margin-bottom\":\"10px\"}},[n(\"el-col\",{attrs:{offset:1}},[n(\"div\",{staticClass:\"el-form-item__label\"},[e._v(\"操作步骤:\")])])],1),n(\"el-row\",{attrs:{type:\"flex\"}},[n(\"el-col\",{attrs:{span:22,offset:1}},[n(\"el-table\",{staticClass:\"tb-edit\",attrs:{data:e.caseInfo.steps,border:\"\",size:\"mini\",\"highlight-current-row\":\"\"}},[n(\"el-table-column\",{attrs:{label:\"编码\",prop:\"num\",\"min-width\":\"10%\"}}),n(\"el-table-column\",{attrs:{label:\"步骤描述\",prop:\"description\",\"min-width\":\"35%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-input\",{staticClass:\"table-edit-input\",attrs:{size:\"mini\",type:\"textarea\",autosize:{minRows:1,maxRows:6},rows:2,placeholder:\"请输入内容\",clearable:\"\"},model:{value:t.row.desc,callback:function(n){e.$set(t.row,\"desc\",n)},expression:\"scope.row.desc\"}})]}}])}),n(\"el-table-column\",{attrs:{label:\"预期结果\",prop:\"result\",\"min-width\":\"35%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-input\",{staticClass:\"table-edit-input\",attrs:{size:\"mini\",type:\"textarea\",autosize:{minRows:1,maxRows:6},rows:2,placeholder:\"请输入内容\",clearable:\"\"},model:{value:t.row.result,callback:function(n){e.$set(t.row,\"result\",n)},expression:\"scope.row.result\"}})]}}])}),n(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[n(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-plus\",circle:\"\",size:\"mini\"},on:{click:function(n){return e.handleAddStep(t.$index,t.row)}}}),n(\"el-button\",{attrs:{icon:\"el-icon-document-copy\",type:\"success\",circle:\"\",size:\"mini\"},on:{click:function(n){return e.handleCopyStep(t.$index,t.row)}}}),n(\"el-button\",{attrs:{type:\"danger\",icon:\"el-icon-delete\",circle:\"\",size:\"mini\",disabled:0===t.$index&&e.caseInfo.steps.length<=1},on:{click:function(n){return e.handleDeleteStep(t.$index,t.row)}}})]}}])})],1)],1)],1),n(\"el-row\",{staticStyle:{\"margin-top\":\"15px\",\"margin-bottom\":\"10px\"}},[n(\"el-col\",{attrs:{offset:1}},[n(\"div\",{staticClass:\"el-form-item__label\"},[e._v(\"备注:\")])])],1),n(\"el-row\",{attrs:{type:\"flex\"}},[n(\"el-col\",{attrs:{span:22,offset:1}},[n(\"el-form-item\",{attrs:{prop:\"description\",\"label-width\":\"0\"}},[n(\"el-input\",{attrs:{autosize:{minRows:3,maxRows:5},type:\"textarea\",rows:3,placeholder:\"请输入内容\"},model:{value:e.caseInfo.description,callback:function(t){e.$set(e.caseInfo,\"description\",t)},expression:\"caseInfo.description\"}})],1)],1)],1)],1),n(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v(\"取 消\")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveCase}},[e._v(\"保 存\")])],1)],1)],1)},a=[],o=n(\"a34a\"),i=n.n(o),s=n(\"a7b1\"),c=n(\"89b1\"),l=n(\"387e\"),u=n(\"51f1\"),d=n(\"dd3b\"),p=n(\"9ff7\");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function b(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){v(o,r,a,i,s,\"next\",e)}function s(e){v(o,r,a,i,s,\"throw\",e)}i(void 0)})}}var w={name:\"case-list\",components:{SelectMenu:c[\"default\"],NodeTree:l[\"default\"],LynSearch:s[\"default\"]},data:function(){return{search:{case_name:\"\",count:10,page:1},total:0,result:{},projects:[],currentProject:null,treeNodes:[],selectNodeIds:[],selectParentNodes:[],selectNode:{},caseList:[],operationType:null,editDialogVisible:!1,caseInfo:{},defaultCaseInfo:{name:\"\",type:\"\",priority:\"\",steps:[{num:1,result:\"\",steps:\"\",description:\"\"}]},typeList:[\"功能测试\",\"性能测试\",\"接口测试\",\"冒烟测试\",\"回归测试\",\"其它\"],priorityList:[{text:\"P1\",value:\"P1\"},{text:\"P2\",value:\"P2\"},{text:\"P3\",value:\"P3\"},{text:\"P4\",value:\"P4\"}],reviewStatusList:[{text:\"未评审\",value:\"Prepare\"},{text:\"通过\",value:\"Pass\"},{text:\"未通过\",value:\"UnPass\"}]}},mounted:function(){this.pageInit()},methods:{pageInit:function(){var e=b(i.a.mark(function e(){return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getProjects();case 2:return e.next=4,this.getNodeTree();case 4:return e.next=6,this.refreshTable();case 6:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getProjects:function(){var e=b(i.a.mark(function e(){var t;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u[\"default\"].getNewProject(20);case 2:t=e.sent,this.projects=t.items,this.setCurrentProject(t.items[0]);case 5:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getNodeTree:function(){var e=b(i.a.mark(function e(){return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d[\"default\"].getNodeByProjectId(this.currentProject.id);case 2:this.treeNodes=e.sent;case 3:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),changeProject:function(e){this.setCurrentProject(e),this.refreshTable()},nodeChange:function(e,t){this.selectNodeIds=e,this.selectParentNodes=t,this.refreshTable()},bachHome:function(){this.selectNodeIds=[],this.selectParentNodes=[],this.selectNode={},this.refreshTable()},handleCreate:function(){this.editDialogVisible=!0,this.caseInfo=h({},this.defaultCaseInfo),this.operationType=1},handleEdit:function(e){this.editDialogVisible=!0,this.caseInfo=h({},e),this.operationType=2},handleCopy:function(e){this.editDialogVisible=!0,this.caseInfo=h({},e),this.operationType=1},handleDelete:function(e){var t=this;this.$confirm(\"确定要删除吗?\",\"提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then(b(i.a.mark(function n(){var r;return i.a.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,p[\"default\"].deleteCase(e);case 2:r=n.sent,r.code<window.MAX_SUCCESS_CODE?(t.$message.success(r.message),t.refreshTable()):t.$message.error(\"删除功能异常\");case 4:case\"end\":return n.stop()}},n)})))},handleSizeChange:function(e){this.search.count=e,this.refreshTable()},handleCurrentChange:function(e){this.search.page=e,this.refreshTable()},priorityFilter:function(e,t){return t.priority===e},getPriorityStyle:function(e){return\"P1\"===e||\"P2\"===e?\"danger\":\"P3\"===e?\"warning\":\"P4\"===e?\"success\":void 0},reviewStatusFilter:function(e,t){return t.review_status===e},refreshTable:function(){var e=b(i.a.mark(function e(){var t;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.search.node_ids=this.selectNodeIds,this.search.project_id=this.currentProject.id,e.next=4,p[\"default\"].getCaseList(this.search);case 4:t=e.sent,t.items.forEach(function(e){e.steps=JSON.parse(e.steps)}),this.caseList=t.items,this.total=t.total;case 8:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),setCurrentProject:function(e){e&&(this.currentProject=e),this.refresh()},refresh:function(){this.selectNodeIds=[],this.selectParentNodes=[],this.selectNode={},this.getNodeTree()},handleAddStep:function(e,t){var n={};n.num=t.num+1,n.desc=\"\",n.result=\"\",this.caseInfo.steps.forEach(function(e){e.num>t.num&&e.num++}),this.caseInfo.steps.splice(e+1,0,n)},handleCopyStep:function(e,t){var n={};n.num=t.num+1,n.desc=t.desc,n.result=t.result,this.caseInfo.steps.forEach(function(e){e.num>t.num&&e.num++}),this.caseInfo.steps.splice(e+1,0,n)},handleDeleteStep:function(e,t){this.caseInfo.steps.splice(e,1),this.caseInfo.steps.forEach(function(e){e.num>t.num&&e.num--})},saveCase:function(){var e=b(i.a.mark(function e(){var t,n,r;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=h({},this.caseInfo),n=this.selectNodeIds[0],t.steps=JSON.stringify(this.caseInfo.steps),t.node_id||(t.node_id=n),t.project_id=this.currentProject.id,1!==this.operationType){e.next=11;break}return e.next=8,p[\"default\"].createCase(t);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,p[\"default\"].updateCase(t);case 13:e.t0=e.sent;case 14:r=e.t0,r.code<window.MAX_SUCCESS_CODE?(this.$message.success(r.message),this.editDialogVisible=!1,this.refreshTable()):this.$message.error(\"服务端异常\");case 16:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},y=w,g=(n(\"2066\"),n(\"2877\")),k=Object(g[\"a\"])(y,r,a,!1,null,\"d916584a\",null);t[\"default\"]=k.exports},\"51f1\":function(e,t,n){\"use strict\";n.r(t);var r=n(\"a34a\"),a=n.n(r),o=n(\"ceda\");function i(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,\"next\",e)}function c(e){i(o,r,a,s,c,\"throw\",e)}s(void 0)})}}function c(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var d=function(){function e(){c(this,e)}return u(e,[{key:\"searchProjectList\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/project/list\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"getNewProject\",value:function(){var e=s(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={name:\"\",page:1,count:t},e.next=3,Object(o[\"post\"])(\"/track/project/list\",n);case 3:return r=e.sent,e.abrupt(\"return\",r);case 5:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"createProject\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/project/create\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"updateProject\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/project/update\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"deleteProject\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"_delete\"])(\"/track/project/\".concat(t));case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t[\"default\"]=new d},\"757f\":function(e,t,n){},8940:function(e,t,n){\"use strict\";var r=n(\"9f02\"),a=n.n(r);a.a},\"89b1\":function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"div\"},[e.title?n(\"span\",{staticClass:\"menu-title\"},[e._v(e._s(\"[\"+e.title+\"]\"))]):n(\"i\",{staticClass:\"el-icon-files menu-icon\"}),n(\"el-select\",{staticClass:\"project_menu\",attrs:{slot:\"prepend\",filterable:\"\",size:\"small\"},on:{change:e.changeData},slot:\"prepend\",model:{value:e.value,callback:function(t){e.value=t},expression:\"value\"}},e._l(e.data,function(e,t){return n(\"el-option\",{key:t,attrs:{label:e.name,value:t}})}),1)],1)},a=[],o={name:\"SelectMenu\",props:{data:{type:Array},currentData:{type:Object},title:{type:String}},data:function(){return{value:\"\"}},watch:{currentData:function(e){void 0!==e&&null!==e&&(this.value=e.name)}},methods:{changeData:function(e){this.$emit(\"dataChange\",this.data[e])}}},i=o,s=(n(\"dda2\"),n(\"2877\")),c=Object(s[\"a\"])(i,r,a,!1,null,\"119d6b74\",null);t[\"default\"]=c.exports},\"9f02\":function(e,t,n){},\"9ff7\":function(e,t,n){\"use strict\";n.r(t);var r=n(\"a34a\"),a=n.n(r),o=n(\"ceda\");function i(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,\"next\",e)}function c(e){i(o,r,a,s,c,\"throw\",e)}s(void 0)})}}function c(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var d=function(){function e(){c(this,e)}return u(e,[{key:\"createCase\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/case/create\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"getCaseList\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/case/list\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"updateCase\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/case/update\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"deleteCase\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"_delete\"])(\"/track/case/\".concat(t));case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t[\"default\"]=new d},a7b1:function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"lin-search\"},[n(\"el-input\",{staticClass:\"input-with-select\",attrs:{size:\"medium\",placeholder:e.placeholder,clearable:\"\"},on:{change:e.handleChange},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:\"keyword\"}},[n(\"el-button\",{attrs:{slot:\"append\",icon:\"el-icon-search\"},slot:\"append\"})],1)],1)},a=[],o=n(\"a34a\"),i=n.n(o);function s(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){s(o,r,a,i,c,\"next\",e)}function c(e){s(o,r,a,i,c,\"throw\",e)}i(void 0)})}}var l={props:{placeholder:{type:String,default:\"请输入内容\"}},data:function(){return{keyword:\"\"}},methods:{clear:function(){this.keyword=\"\"},handleChange:function(){var e=c(i.a.mark(function e(t){return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$emit(\"input\",t),this.$emit(\"change\",t);case 2:case\"end\":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},u=l,d=(n(\"0bf7\"),n(\"2877\")),p=Object(d[\"a\"])(u,r,a,!1,null,\"17b355a7\",null);t[\"default\"]=p.exports},abab:function(e,t,n){\"use strict\";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"el-dialog\",{attrs:{title:\"edit\"===e.type?\"重命名\":\"添加\",visible:e.dialogFormVisible,\"before-close\":e.close,width:\"30%\"},on:{\"update:visible\":function(t){e.dialogFormVisible=t}}},[n(\"el-row\",{attrs:{type:\"flex\",justify:\"center\"}},[n(\"el-col\",{attrs:{span:18}},[n(\"el-form\",{ref:\"nodeForm\",attrs:{model:e.form},nativeOn:{submit:function(e){e.preventDefault()}}},[n(\"el-form-item\",{attrs:{label:\"模块名称\",\"label-width\":e.formLabelWidth,prop:\"name\"}},[n(\"el-input\",{model:{value:e.form.name,callback:function(t){e.$set(e.form,\"name\",t)},expression:\"form.name\"}})],1)],1)],1)],1),n(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{on:{click:e.close}},[e._v(\"取 消\")]),n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveNode},nativeOn:{keydown:function(t){if(!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\"))return null;t.preventDefault()}}},[e._v(\"保 存\")])],1)],1)},a=[],o=n(\"a34a\"),i=n.n(o),s=n(\"dd3b\");function c(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function l(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){c(o,r,a,i,s,\"next\",e)}function s(e){c(o,r,a,i,s,\"throw\",e)}i(void 0)})}}var u={data:function(){return{name:\"node-edit\",form:{name:\"\"},type:\"\",node:{},nodeIds:[],formLabelWidth:\"80px\",dialogFormVisible:!1}},props:{treeNodes:{type:Array},currentProject:{type:Object}},methods:{open:function(e,t,n){this.type=e,this.node=t,\"edit\"===e&&(this.form.name=this.node.name),this.nodeIds=n,this.dialogFormVisible=!0},saveNode:function(){var e=l(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t={},t.name=this.form.name.trim(),t.label=this.form.name,t.project_id=this.currentProject.id,\"add\"!==this.type){e.next=12;break}return t.level=1,this.node&&(t.parent_id=this.node.id,t.level=this.node.level+1),e.next=9,s[\"default\"].createNode(t);case 9:n=e.sent,e.next=19;break;case 12:if(\"edit\"!==this.type){e.next=19;break}return t.id=this.node.id,t.level=this.node.level,t.nodeIds=this.nodeIds,e.next=18,s[\"default\"].updateNode(t);case 18:n=e.sent;case 19:n.code<window.MAX_SUCCESS_CODE?(this.$message.success(n.message),this.$emit(\"refresh\"),this.close()):this.$message.error(\"服务端异常\");case 20:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),close:function(){this.form.name=\"\",this.dialogFormVisible=!1}}},d=u,p=n(\"2877\"),f=Object(p[\"a\"])(d,r,a,!1,null,\"56d78c26\",null);t[\"default\"]=f.exports},bf84:function(e,t,n){},dd3b:function(e,t,n){\"use strict\";n.r(t);var r=n(\"a34a\"),a=n.n(r),o=n(\"ceda\");function i(e,t,n,r,a,o,i){try{var s=e[o](i),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(r,a)}function s(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function s(e){i(o,r,a,s,c,\"next\",e)}function c(e){i(o,r,a,s,c,\"throw\",e)}s(void 0)})}}function c(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var d=function(){function e(){c(this,e)}return u(e,[{key:\"createNode\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/node/create\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"getNodeByProjectId\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"get\"])(\"/track/node/\".concat(t));case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"updateNode\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/node/update\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"deleteNodes\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/node/delete\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"dragNode\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/node/drag\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"nodePosition\",value:function(){var e=s(a.a.mark(function e(t){var n;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o[\"post\"])(\"/track/node/position\",t);case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t[\"default\"]=new d},dda2:function(e,t,n){\"use strict\";var r=n(\"bf84\"),a=n.n(r);a.a}}]);","extractedComments":[]}