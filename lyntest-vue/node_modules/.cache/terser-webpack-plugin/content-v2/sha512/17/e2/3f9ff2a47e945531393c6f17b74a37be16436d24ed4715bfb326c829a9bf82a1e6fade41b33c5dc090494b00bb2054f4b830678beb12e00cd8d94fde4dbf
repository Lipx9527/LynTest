{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-cf92d192\",\"chunk-cb6b80e8\",\"chunk-d5f097cc\",\"chunk-2d0c956b\",\"chunk-2d0dee97\",\"chunk-2d0a4d8f\"],{\"07d6\":function(t,e,s){\"use strict\";s.r(e);var n=s(\"a34a\"),r=s.n(n),a=s(\"ceda\");function i(t,e,s,n,r,a,i){try{var c=t[a](i),o=c.value}catch(l){return void s(l)}c.done?e(o):Promise.resolve(o).then(n,r)}function c(t){return function(){var e=this,s=arguments;return new Promise(function(n,r){var a=t.apply(e,s);function c(t){i(a,n,r,c,o,\"next\",t)}function o(t){i(a,n,r,c,o,\"throw\",t)}c(void 0)})}}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function l(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,s){return e&&l(t.prototype,e),s&&l(t,s),t}var p=function(){function t(){o(this,t)}return u(t,[{key:\"searchReportList\",value:function(){var t=c(r.a.mark(function t(e){var s;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a[\"post\"])(\"/autotest/report/list\",e);case 2:return s=t.sent,t.abrupt(\"return\",s);case 4:case\"end\":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:\"getReportDetail\",value:function(){var t=c(r.a.mark(function t(e){var s;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a[\"get\"])(\"/autotest/report/\".concat(e));case 2:return s=t.sent,t.abrupt(\"return\",s);case 4:case\"end\":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:\"execute\",value:function(){var t=c(r.a.mark(function t(e){var s;return r.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a[\"post\"])(\"/autotest/report/execute/\".concat(e));case 2:return s=t.sent,t.abrupt(\"return\",s);case 4:case\"end\":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e[\"default\"]=new p},5326:function(t,e,s){\"use strict\";var n=s(\"6c68\"),r=s.n(n);r.a},\"595f\":function(t,e,s){\"use strict\";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[s(\"el-table\",{attrs:{data:t.result,stripe:\"\"}},[s(\"el-table-column\",{attrs:{prop:\"expected_value\",label:\"预期值\"}}),s(\"el-table-column\",{attrs:{prop:\"compare_value\",label:\"断言方式\"}}),s(\"el-table-column\",{attrs:{prop:\"actual_value\",label:\"实际取值\",\"show-overflow-tooltip\":\"\"}}),s(\"el-table-column\",{attrs:{prop:\"extract_value\",label:\"结果\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[s(\"el-tag\",{attrs:{type:\"通过\"===e.row.extract_value?\"success\":\"danger\",\"disable-transitions\":\"\"}},[t._v(t._s(e.row.extract_value))])]}}])})],1)],1)},r=[],a={name:\"assertions-detail\",props:{result:{type:Array}},watch:{result:function(){this.getResult()}},mounted:function(){this.getResult()},data:function(){return{compare_list:{1:\"相等\",2:\"包含\",3:\"不为空或null\"}}},methods:{getResult:function(){var t=this;this.result.forEach(function(e){e.compare_value=t.compare_list[e.compare_type],e.extract_value=e.extract_success?\"通过\":\"失败\"})}}},i=a,c=s(\"2877\"),o=Object(c[\"a\"])(i,n,r,!1,null,\"0278fe68\",null);e[\"default\"]=o.exports},6415:function(t,e,s){},\"6c68\":function(t,e,s){},\"6c7f\":function(t,e,s){\"use strict\";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"container\"},[s(\"div\",{staticClass:\"title\"},[t._v(\"Status:\")]),s(\"div\",{class:t.getStatusCss(t.statusCode)},[t._v(t._s(t.statusCode)+\" \"+t._s(t.message))]),s(\"div\",{staticClass:\"title\"},[t._v(\"Time:\")]),s(\"div\",{class:t.getTimeCss(t.responseTime)},[t._v(t._s(t.responseTime)+\" ms\")])])},r=[],a={name:\"response-status\",props:{statusCode:{type:Number},responseTime:{type:Number},message:{type:String}},data:function(){return{}},methods:{getStatusCss:function(t){if(t)return String(t).startsWith(\"2\")?\"success\":String(t).startsWith(\"3\")?\"warning\":\"error\"},getTimeCss:function(t){if(t)return t<=2e3?\"success\":t>2e3&&t<=5e3?\"warning\":\"error\"}}},i=a,c=(s(\"5326\"),s(\"2877\")),o=Object(c[\"a\"])(i,n,r,!1,null,\"0a12edc4\",null);e[\"default\"]=o.exports},\"7cc3\":function(t,e,s){\"use strict\";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.report_loading?s(\"div\",{staticClass:\"loading-container\"},[s(\"el-progress\",{staticClass:\"progress\",attrs:{type:\"circle\",percentage:t.percentage,width:160,\"stroke-width\":16}})],1):s(\"div\",{staticClass:\"container\"},[s(\"div\",{staticClass:\"case-info\"},[s(\"el-card\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.report_loading,expression:\"report_loading\"}],staticClass:\"ring-card\"},[s(\"ve-ring\",{staticClass:\"ring\",attrs:{data:t.chartData,settings:t.chartSettings,extend:t.chartExtend}})],1),s(\"el-card\",{staticClass:\"case-list\"},[s(\"el-switch\",{staticClass:\"sort-switch\",attrs:{\"active-color\":\"#13ce66\",\"inactive-color\":\"#ff4949\"},on:{change:t.dataSort},model:{value:t.sort_switch,callback:function(e){t.sort_switch=e},expression:\"sort_switch\"}}),s(\"div\",{staticStyle:{height:\"360px\"}},[s(\"vue-scroll\",t._l(t.result_list,function(e){return s(\"div\",{key:e.index,class:{\"case-title-normal\":!e.is_choose,\"case-title-choose\":e.is_choose},on:{click:function(s){return t.getCaseDetail(e)}}},[e.expected_is_pass?s(\"i\",{staticClass:\"el-icon-success icon\",staticStyle:{color:\"#00C292\"}}):e.expected_is_pass?t._e():s(\"i\",{staticClass:\"el-icon-error icon\",staticStyle:{color:\"#E46A76\"}}),s(\"span\",{staticClass:\"title\"},[t._v(\"\\n            \"+t._s(e.case_name)+\"\\n            \")])])}),0)],1)],1)],1),s(\"el-card\",{staticClass:\"case-detail\"},[s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.case_choose,expression:\"case_choose\"}],staticStyle:{height:\"660px\"}},[s(\"vue-scroll\",[s(\"div\",{staticClass:\"header\"},[s(\"div\",{staticClass:\"title\"},[t._v(\"\\n            \"+t._s(t.case_detail.case_name)+\"\\n          \")]),t.case_detail.status_code?s(\"response-status\",{attrs:{\"status-code\":t.case_detail.status_code,message:t.case_detail.message,\"response-time\":t.case_detail.response_time}}):t._e()],1),t.case_choose&&0!==t.case_detail.expected_res.length?s(\"assertions-detail\",{staticClass:\"table\",attrs:{result:t.case_detail.expected_res}}):t._e(),t.case_choose&&0!==t.case_detail.variable_list.length?s(\"variable-detail\",{staticClass:\"table\",attrs:{result:t.case_detail.variable_list}}):t._e(),s(\"read-only-content\",{attrs:{title:\"URL\",content:t.case_detail.url}}),s(\"read-only-content\",{attrs:{title:\"Request\",content:t.case_detail.request_text}}),s(\"read-only-content\",{attrs:{title:\"Response\",content:t.case_detail.response_text}})],1)],1)])],1)},r=[],a=s(\"a34a\"),i=s.n(a),c=s(\"07d6\"),o=s(\"595f\"),l=s(\"8856\"),u=s(\"f951\"),p=s(\"6c7f\");function d(t,e){return _(t)||h(t,e)||f()}function f(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}function h(t,e){var s=[],n=!0,r=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done);n=!0)if(s.push(i.value),e&&s.length===e)break}catch(o){r=!0,a=o}finally{try{n||null==c[\"return\"]||c[\"return\"]()}finally{if(r)throw a}}return s}function _(t){if(Array.isArray(t))return t}function v(t,e,s,n,r,a,i){try{var c=t[a](i),o=c.value}catch(l){return void s(l)}c.done?e(o):Promise.resolve(o).then(n,r)}function b(t){return function(){var e=this,s=arguments;return new Promise(function(n,r){var a=t.apply(e,s);function i(t){v(a,n,r,i,c,\"next\",t)}function c(t){v(a,n,r,i,c,\"throw\",t)}i(void 0)})}}var w={components:{AssertionsDetail:o[\"default\"],ReadOnlyContent:u[\"default\"],ResponseStatus:p[\"default\"],VariableDetail:l[\"default\"]},data:function(){return{report_id:null,collection_id:null,report_loading:!0,total_count:0,percentage:0,sort_switch:!1,base_result_list:[],result_list:[],case_detail:{},case_choose:!1,chartSettings:{radius:[65,45],hoverAnimation:!1,label:{show:!1}},chartExtend:{graphic:[{type:\"text\",left:\"center\",top:\"45%\",style:{text:0,textAlign:\"center\",fill:\"#000\",fontSize:28}},{type:\"text\",left:\"center\",top:\"55%\",style:{text:\"请求\",textAlign:\"center\",fill:\"#999999\",fontSize:16}}],color:[\"#00C292\",\"#E46A76\"]},chartData:{columns:[\"type\",\"count\"],rows:[{type:\"成功\",count:0},{type:\"失败\",count:0}]},result_css:{status_code_type:\"success\",time_type:\"success\"}}},watch:{total_count:function(t){this.chartExtend.graphic[0].style.text=t},$route:function(){this.pageInit()}},mounted:function(){this.pageInit()},destroyed:function(){this.websocket&&this.websocket.close()},methods:{pageInit:function(){var t=b(i.a.mark(function t(){var e,s,n;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.report_id=this.$route.params.id,e=this.report_id.split(\"_\"),s=d(e,1),n=s[0],this.collection_id=n,t.next=5,this.getReportDetail();case 5:if(t.sent){t.next=7;break}this.initWebSocket();case 7:case\"end\":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getReportDetail:function(){var t=b(i.a.mark(function t(){var e;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c[\"default\"].getReportDetail(this.report_id);case 2:if(e=t.sent,e){t.next=5;break}return t.abrupt(\"return\",!1);case 5:return this.report_loading=!1,this.dataInit(e),t.abrupt(\"return\",!0);case 8:case\"end\":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),dataInit:function(t){var e=t.pass_count,s=t.error_count,n=t.result;this.total_count=e+s,this.chartData.rows[0].count=e,this.chartData.rows[1].count=s,this.base_result_list=n.slice(),this.result_list=n.slice(),this.dataSort()},dataSort:function(){this.sort_switch?this.result_list=this.base_result_list.slice():this.result_list.sort(function(t,e){return t.expected_is_pass-e.expected_is_pass})},initWebSocket:function(){var t=\"http://118.126.107.122:8080/dpf\",e=\"\".concat(t.replace(\"http\",\"ws\"),\"ws/message\");this.websocket=new WebSocket(e),this.websocket.onmessage=this.websocketOnMessage,this.websocket.onopen=this.websocketOnOpen,this.websocket.onerror=this.websocketOnError,this.websocket.onclose=this.websocketClose},websocketOnOpen:function(){console.log(\"建立连接\")},websocketOnError:function(){this.initWebSocket()},websocketOnMessage:function(){var t=b(i.a.mark(function t(e){var s,n,r,a,c;return i.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(s=e.data.split(\"_\"),n=d(s,3),r=n[0],a=n[1],c=n[2],\"collection\"===r){t.next=3;break}return t.abrupt(\"return\");case 3:if(a===this.collection_id){t.next=5;break}return t.abrupt(\"return\");case 5:if(this.percentage=Number(c),100!==Number(c)){t.next=12;break}return this.websocket.close(),t.next=10,new Promise(function(t){setTimeout(function(){return t(\"done!\")},1e3)});case 10:return t.next=12,this.getReportDetail();case 12:case\"end\":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),websocketSend:function(t){this.websocket.send(t)},websocketClose:function(t){console.log(\"断开连接\",t)},getCaseDetail:function(t){this.case_choose=!0,this.result_list.forEach(function(t){t.is_choose=!1}),t.is_choose=!0,this.case_detail=t}}},m=w,g=(s(\"df08\"),s(\"2877\")),y=Object(g[\"a\"])(m,n,r,!1,null,\"5b57a816\",null);e[\"default\"]=y.exports},8856:function(t,e,s){\"use strict\";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[s(\"el-table\",{attrs:{data:t.result,stripe:\"\"}},[s(\"el-table-column\",{attrs:{prop:\"variable_name\",label:\"保存变量名\"}}),s(\"el-table-column\",{attrs:{prop:\"actual_res\",label:\"变量值\",\"show-overflow-tooltip\":\"\"}})],1)],1)},r=[],a={name:\"variable-detail\",props:{result:{type:Array}},data:function(){return{}}},i=a,c=s(\"2877\"),o=Object(c[\"a\"])(i,n,r,!1,null,\"cb076ff6\",null);e[\"default\"]=o.exports},d468:function(t,e,s){},de21:function(t,e,s){\"use strict\";var n=s(\"d468\"),r=s.n(n);r.a},df08:function(t,e,s){\"use strict\";var n=s(\"6415\"),r=s.n(n);r.a},f951:function(t,e,s){\"use strict\";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"container\"},[t.title?s(\"span\",{staticClass:\"title\"},[t._v(t._s(t.title))]):t._e(),s(\"div\",{staticClass:\"content\",attrs:{\"aria-readonly\":\"true\"}},[t._v(t._s(t.content))])])},r=[],a={name:\"read-only-content\",props:{title:{type:String},content:{type:String}}},i=a,c=(s(\"de21\"),s(\"2877\")),o=Object(c[\"a\"])(i,n,r,!1,null,\"23ef645a\",null);e[\"default\"]=o.exports}}]);","extractedComments":[]}