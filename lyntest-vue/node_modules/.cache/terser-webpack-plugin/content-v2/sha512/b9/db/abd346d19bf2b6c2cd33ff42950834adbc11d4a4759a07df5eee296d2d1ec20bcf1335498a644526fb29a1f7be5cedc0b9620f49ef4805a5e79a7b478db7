{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-73cedc8a\",\"chunk-11616fc8\",\"chunk-2d0aa206\",\"chunk-2d208c17\"],{\"06af\":function(e,t,a){\"use strict\";var n=a(\"8f82\"),r=a.n(n);r.a},\"0d7e\":function(e,t,a){\"use strict\";var n=a(\"b770\"),r=a.n(n);r.a},\"104e\":function(e,t,a){\"use strict\";a.r(t);var n=a(\"a34a\"),r=a.n(n),s=a(\"ceda\");function c(e,t,a,n,r,s,c){try{var o=e[s](c),i=o.value}catch(l){return void a(l)}o.done?t(i):Promise.resolve(i).then(n,r)}function o(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var s=e.apply(t,a);function o(e){c(s,n,r,o,i,\"next\",e)}function i(e){c(s,n,r,o,i,\"throw\",e)}o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}var h=function(){function e(){i(this,e)}return u(e,[{key:\"searchCaseList\",value:function(){var e=o(r.a.mark(function e(t){var a;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s[\"post\"])(\"/autotest/http/list\",t);case 2:return a=e.sent,e.abrupt(\"return\",a);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"createCase\",value:function(){var e=o(r.a.mark(function e(t){var a;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s[\"post\"])(\"/autotest/http/create\",t);case 2:return a=e.sent,e.abrupt(\"return\",a);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"updateCase\",value:function(){var e=o(r.a.mark(function e(t){var a;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s[\"post\"])(\"/autotest/http/update\",t);case 2:return a=e.sent,e.abrupt(\"return\",a);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"deleteCase\",value:function(){var e=o(r.a.mark(function e(t){var a;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s[\"post\"])(\"/autotest/http/delete\",t);case 2:return a=e.sent,e.abrupt(\"return\",a);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"execute\",value:function(){var e=o(r.a.mark(function e(t){var a;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s[\"post\"])(\"/autotest/http/execute\",t);case 2:return a=e.sent,e.abrupt(\"return\",a);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:\"getCreatorList\",value:function(){var e=o(r.a.mark(function e(){var t;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s[\"get\"])(\"/autotest/http/creator\");case 2:return t=e.sent,e.abrupt(\"return\",t);case 4:case\"end\":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}]),e}();t[\"default\"]=new h},1677:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"el-card\",{staticClass:\"container\"},[a(\"el-row\",[a(\"el-input\",{staticClass:\"row-name\",attrs:{placeholder:\"接口名称\",size:\"small\"},on:{change:e.searchCaseList},model:{value:e.search.case_name,callback:function(t){e.$set(e.search,\"case_name\",t)},expression:\"search.case_name\"}}),a(\"el-select\",{staticClass:\"row-category\",attrs:{placeholder:\"系 统\",clearable:\"\",size:\"small\",filterable:\"\"},on:{change:e.searchCaseList},model:{value:e.search.category,callback:function(t){e.$set(e.search,\"category\",t)},expression:\"search.category\"}},e._l(e.category_list,function(e){return a(\"el-option\",{key:e.category_name,attrs:{label:e.category_name,value:e.category_name}})}),1),a(\"el-select\",{staticClass:\"row-creator\",attrs:{placeholder:\"创建人\",clearable:\"\",size:\"small\",filterable:\"\"},on:{change:e.searchCaseList},model:{value:e.search.creator_code,callback:function(t){e.$set(e.search,\"creator_code\",t)},expression:\"search.creator_code\"}},e._l(e.creator_list,function(t){return a(\"el-option\",{key:t.creator_code,attrs:{label:t.creator_name,value:t.creator_code}},[a(\"span\",{staticClass:\"creator-name\"},[e._v(e._s(t.creator_name))]),a(\"span\",{staticStyle:{float:\"right\",color:\"#8492a6\",\"font-size\":\"13px\"}},[e._v(e._s(t.creator_code))])])}),1),a(\"el-pagination\",{staticStyle:{float:\"right\"},attrs:{background:\"\",small:\"\",\"current-page\":e.search.page,\"page-size\":e.search.count,\"page-sizes\":[10,20,50,100],total:e.total,layout:\"sizes, prev, pager, next\"},on:{\"size-change\":e.handleSizeChange,\"current-change\":e.handleCurrentChange}})],1),a(\"div\",{staticClass:\"case-table\"},[a(\"vue-scroll\",[a(\"el-table\",{ref:\"multipleTable\",attrs:{data:e.case_list,\"tooltip-effect\":\"dark\",stripe:\"\"},on:{\"row-click\":e.rowClick}},[a(\"el-table-column\",{attrs:{prop:\"case_name\",label:\"接口名称\",\"min-width\":\"200\",fixed:\"\"}}),a(\"el-table-column\",{attrs:{label:\"备注\",fixed:\"\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[t.row.description?a(\"el-tooltip\",{attrs:{effect:\"dark\",placement:\"top-start\"}},[a(\"div\",{attrs:{slot:\"content\"},slot:\"content\"},[e._v(e._s(t.row.description))]),a(\"l-icon\",{attrs:{name:\"read\",color:\"#409EFF\",height:\"1.6em\",width:\"1.6em\"}})],1):a(\"l-icon\",{attrs:{name:\"read\",color:\"#ccc\",height:\"1.6em\",width:\"1.6em\"}})]}}])}),a(\"el-table-column\",{attrs:{prop:\"api_method\",\"min-width\":\"100\",label:\"请求方式\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"div\",{class:t.row.api_method},[e._v(e._s(t.row.api_method))])]}}])}),a(\"el-table-column\",{attrs:{label:\"接口路径\",prop:\"api_url\",\"show-overflow-tooltip\":!0,\"min-width\":\"440\"}}),a(\"el-table-column\",{attrs:{prop:\"category\",label:\"系 统\",\"min-width\":\"100\",sortable:\"\"}}),a(\"el-table-column\",{attrs:{prop:\"creator_name\",label:\"创建人\",width:\"120\"}})],1)],1)],1)],1)},r=[],s=a(\"a34a\"),c=a.n(s),o=a(\"104e\");function i(e,t,a,n,r,s,c){try{var o=e[s](c),i=o.value}catch(l){return void a(l)}o.done?t(i):Promise.resolve(i).then(n,r)}function l(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var s=e.apply(t,a);function c(e){i(s,n,r,c,o,\"next\",e)}function o(e){i(s,n,r,c,o,\"throw\",e)}c(void 0)})}}var u={name:\"http-case-chose\",props:{value:{type:Object}},data:function(){return{search:{page:1,count:10,case_name:\"\",category:\"\",creator_code:\"\"},total:0,category_list:[],creator_list:[],case_list:[]}},created:function(){this.searchCaseList(),this.getCreatorList()},methods:{searchCaseList:function(){var e=l(c.a.mark(function e(){var t;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o[\"default\"].searchCaseList(this.search);case 2:t=e.sent,this.case_list=t.items,this.total=t.total;case 5:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getCreatorList:function(){var e=l(c.a.mark(function e(){var t;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o[\"default\"].getCreatorList();case 2:t=e.sent,this.creator_list=t;case 4:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.search.count=e,this.searchCaseList()},handleCurrentChange:function(e){this.search.page=e,this.searchCaseList()},rowClick:function(e){this.$emit(\"input\",e),this.$emit(\"dialogClose\")}}},h=u,p=(a(\"06af\"),a(\"2877\")),f=Object(p[\"a\"])(h,n,r,!1,null,\"39f3ed9a\",null);t[\"default\"]=f.exports},\"4aa4\":function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"container\"},[a(\"el-card\",{staticClass:\"info\"},[a(\"el-form\",{staticClass:\"demo-form-inline\",attrs:{inline:!0,model:e.search}},[a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.dialog_visible=!0}}},[e._v(\"Case选择\")])],1),a(\"el-form-item\",{staticClass:\"label\",attrs:{label:\"线程数\"}},[a(\"el-input-number\",{attrs:{min:1,max:100},model:{value:e.search.threads,callback:function(t){e.$set(e.search,\"threads\",t)},expression:\"search.threads\"}})],1),a(\"el-form-item\",{staticClass:\"label\",attrs:{label:\"执行次数\"}},[a(\"el-input-number\",{attrs:{min:1,max:20},model:{value:e.search.times,callback:function(t){e.$set(e.search,\"times\",t)},expression:\"search.times\"}})],1),a(\"el-form-item\",{staticClass:\"label\"},[a(\"el-button\",{staticClass:\"run-button\",attrs:{type:\"success\",disabled:!e.case_info.case_name||e.loading},on:{click:e.doExecute}},[e._v(\"\\n          执 行\\n          \"),e.loading?a(\"i\",{staticClass:\"el-icon-loading\"}):a(\"i\",{staticClass:\"el-icon-video-play\"})])],1)],1)],1),a(\"el-card\",{staticClass:\"result\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.case_info.case_name,expression:\"case_info.case_name\"}],staticClass:\"case-choose\"},[a(\"span\",{staticClass:\"title\"},[e._v(e._s(e.case_info.case_name))])]),e.loading?a(\"div\",{staticClass:\"loading-container\"},[a(\"el-progress\",{staticClass:\"progress\",attrs:{type:\"circle\",percentage:e.percentage,width:160,\"stroke-width\":16}})],1):e._e()]),a(\"el-dialog\",{attrs:{visible:e.dialog_visible,\"show-close\":!1,width:\"70%\"},on:{\"update:visible\":function(t){e.dialog_visible=t}}},[a(\"http-case-choose\",{on:{dialogClose:e.dialogClose},model:{value:e.case_info,callback:function(t){e.case_info=t},expression:\"case_info\"}})],1)],1)},r=[],s=a(\"a34a\"),c=a.n(s),o=a(\"a5c0\"),i=a(\"1677\");function l(e,t){return p(e)||h(e,t)||u()}function u(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}function h(e,t){var a=[],n=!0,r=!1,s=void 0;try{for(var c,o=e[Symbol.iterator]();!(n=(c=o.next()).done);n=!0)if(a.push(c.value),t&&a.length===t)break}catch(i){r=!0,s=i}finally{try{n||null==o[\"return\"]||o[\"return\"]()}finally{if(r)throw s}}return a}function p(e){if(Array.isArray(e))return e}function f(e,t,a,n,r,s,c){try{var o=e[s](c),i=o.value}catch(l){return void a(l)}o.done?t(i):Promise.resolve(i).then(n,r)}function d(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var s=e.apply(t,a);function c(e){f(s,n,r,c,o,\"next\",e)}function o(e){f(s,n,r,c,o,\"throw\",e)}c(void 0)})}}var v={name:\"batch-execute\",components:{HttpCaseChoose:i[\"default\"]},data:function(){return{websocket:null,loading:!1,case_info:{},dialog_visible:!1,search:{threads:1,times:1,case_id:null},percentage:0,current_step:0,current_report_id:null}},destroyed:function(){this.websocket&&this.websocket.close()},methods:{initWebSocket:function(){var e=\"http://118.126.107.122:8080/dpf\",t=\"\".concat(e.replace(\"http\",\"ws\"),\"/ws/message\");this.websocket=new WebSocket(t),this.websocket.onmessage=this.websocketOnMessage,this.websocket.onopen=this.websocketOnOpen,this.websocket.onerror=this.websocketOnError,this.websocket.onclose=this.websocketClose},websocketOnOpen:function(){console.log(\"建立websocket连接\")},websocketOnError:function(){this.initWebSocket()},websocketOnMessage:function(){var e=d(c.a.mark(function e(t){var a,n,r,s;return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.data),a=t.data.split(\"_\"),n=l(a,2),r=n[0],s=n[1],\"pressure\"===r){e.next=4;break}return e.abrupt(\"return\");case 4:if(Number(s)===this.search.case_id){e.next=6;break}return e.abrupt(\"return\");case 6:this.websocket.close(),this.loading=!1;case 8:case\"end\":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),websocketSend:function(e){this.websocket.send(e)},websocketClose:function(e){console.log(\"断开连接\",e),this.loading=!1},doExecute:function(){var e=d(c.a.mark(function e(){return c.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.initWebSocket(),e.next=4,o[\"default\"].execute(this.search);case 4:this.current_report_id=e.sent;case 5:case\"end\":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),dialogClose:function(){this.dialog_visible=!1,this.search.case_id=this.case_info.id}}},b=v,m=(a(\"0d7e\"),a(\"2877\")),w=Object(m[\"a\"])(b,n,r,!1,null,\"58c34378\",null);t[\"default\"]=w.exports},\"8f82\":function(e,t,a){},a5c0:function(e,t,a){\"use strict\";a.r(t);var n=a(\"a34a\"),r=a.n(n),s=a(\"ceda\");function c(e,t,a,n,r,s,c){try{var o=e[s](c),i=o.value}catch(l){return void a(l)}o.done?t(i):Promise.resolve(i).then(n,r)}function o(e){return function(){var t=this,a=arguments;return new Promise(function(n,r){var s=e.apply(t,a);function o(e){c(s,n,r,o,i,\"next\",e)}function i(e){c(s,n,r,o,i,\"throw\",e)}o(void 0)})}}function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,a){return t&&l(e.prototype,t),a&&l(e,a),e}var h=function(){function e(){i(this,e)}return u(e,[{key:\"execute\",value:function(){var e=o(r.a.mark(function e(t){var a;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s[\"post\"])(\"/autotest/pressure/execute\",t);case 2:return a=e.sent,e.abrupt(\"return\",a);case 4:case\"end\":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t[\"default\"]=new h},b770:function(e,t,a){}}]);","extractedComments":[]}