{"remainingRequest":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/thread-loader/dist/cjs.js!/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/babel-loader/lib/index.js!/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/src/component/base/tinymce/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/src/component/base/tinymce/index.vue","mtime":1606834545505},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/Users/lyn/Desktop/mmdz_ceshi/lyntest-vue/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n// eslint-disable-next-line\nimport tinymce from 'tinymce/tinymce';\nimport Editor from '@tinymce/tinymce-vue';\nimport 'tinymce/themes/silver';\nimport './import-all';\nexport default {\n  name: 'TinymceEditor',\n  props: {\n    defaultContent: {\n      type: String,\n      default: ''\n    },\n    height: {\n      type: Number,\n      default: 500\n    },\n    width: {\n      type: Number,\n      default: undefined\n    },\n    upload_url: {\n      type: String,\n      default: ''\n    },\n    showMenubar: {\n      type: Boolean,\n      default: true\n    },\n    toolbar: {\n      type: String,\n      default: \" undo redo \\n      | formatselect \\n      | bold italic strikethrough forecolor backcolor formatpainter \\n      | link image | alignleft aligncenter alignright alignjustify \\n      | numlist bullist outdent indent \\n      | removeformat \\n      | preview fullscreen code\"\n    },\n    baseUrl: {\n      type: String,\n      default: ''\n    }\n  },\n  components: {\n    Editor: Editor\n  },\n  data: function data() {\n    return {\n      tinymceFlag: 1,\n      tinymceInit: {},\n      content: ''\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    this.tinymceInit = {\n      language_url: \"\".concat(this.baseUrl, \"/tinymce/langs/zh_CN.js\"),\n      skin_url: \"\".concat(this.baseUrl, \"/tinymce/skins/ui/oxide\"),\n      content_css: \"\".concat(this.baseUrl, \"/tinymce/skins/content/default/content.css\"),\n      language: 'zh_CN',\n      height: this.height,\n      width: undefined,\n      browser_spellcheck: true,\n      // 拼写检查\n      branding: false,\n      // 去水印\n      elementpath: false,\n      // 禁用编辑器底部的状态栏\n      statusbar: false,\n      // 隐藏编辑器底部的状态栏\n      paste_data_images: true,\n      // 允许粘贴图像\n      menubar: this.showMenubar,\n      // 隐藏最上方menu\n      plugins: \"print fullpage searchreplace autolink directionality visualblocks \\n        visualchars template codesample charmap hr pagebreak nonbreaking anchor toc insertdatetime \\n        wordcount textpattern help advlist table lists paste preview fullscreen image imagetools code link\",\n      toolbar: this.toolbar,\n      images_upload_handler: function () {\n        var _images_upload_handler = _asyncToGenerator(\n        /*#__PURE__*/\n        _regeneratorRuntime.mark(function _callee(blobInfo, success, failure) {\n          var file;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  file = new File([blobInfo.blob()], blobInfo.filename(), {\n                    type: 'image/*'\n                  });\n\n                  _this.$axios({\n                    method: 'post',\n                    url: '/cms/file',\n                    data: {\n                      file: file\n                    }\n                  }).then(function (res) {\n                    if (res[0] && res[0].url) {\n                      success(res[0].url);\n                    }\n                  }).catch(function (err) {\n                    return failure(err);\n                  });\n\n                case 2:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        function images_upload_handler(_x, _x2, _x3) {\n          return _images_upload_handler.apply(this, arguments);\n        }\n\n        return images_upload_handler;\n      }()\n    };\n  },\n  mounted: function mounted() {\n    if (this.defaultContent) {\n      this.content = this.defaultContent;\n    }\n  },\n  watch: {\n    content: {\n      handler: function handler() {\n        this.$emit('change', this.content);\n      }\n    },\n    defaultContent: {\n      handler: function handler() {\n        this.content = this.defaultContent;\n      },\n      immediate: true\n    }\n  },\n  activated: function activated() {\n    this.tinymceFlag++;\n  }\n};",null]}