{"remainingRequest":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyn/Desktop/lyntest/lyntest-vue/src/view/home/home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/src/view/home/home.vue","mtime":1606834545531},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { NavBar, SideBar, AppMain, ReuseTab, MenuTab, BackTop } from '@/component/layout'\n\nconst navBarHeight = 66 // header高度\nconst reuseTabHeight = 70 // 历史记录栏高度\nconst marginHeight = 20 // 历史记录栏与舞台的间距\nconst sideBarWidth = '210px'\nconst totalHeight = navBarHeight + reuseTabHeight + marginHeight\n\nexport default {\n  name: 'layout',\n  data() {\n    return {\n      isCollapse: false, // 左侧菜单栏是否折叠\n      sideBarWidth, // 左侧菜单栏展开的宽度\n      clientWidth: 0, // 页面宽度\n      clientHeight: 0, // 页面高度\n      foldState: false, // 控制左侧菜单栏按键\n      isPhone: false,\n    }\n  },\n  created() {},\n  mounted() {\n    this.setResize()\n    // console.log(this.clientWidth)\n    if (this.clientWidth < 500) {\n      this.isPhone = true\n    } else {\n      this.isPhone = false\n      // 检测屏幕宽度, 确定默认是否展开\n      if (this.clientWidth <= 768) {\n        this.eventBus.$emit('removeSidebarSearch')\n        this.isCollapse = true\n      } else {\n        this.isCollapse = false\n        this.eventBus.$emit('showSidebarSearch')\n      }\n    }\n    // 监测屏幕宽度 折叠左侧菜单栏\n    window.onresize = () => {\n      this.setResize()\n      if (this.clientWidth <= 500) {\n        this.isPhone = true\n      } else if (this.clientWidth <= 800) {\n        this.isPhone = false\n      }\n    }\n\n    this.eventBus.$on('noReuse', () => {\n      this.$refs.operate.style.height = '86px'\n    })\n    this.eventBus.$on('hasReuse', () => {\n      this.$refs.operate.style.height = '45px'\n    })\n  },\n  inject: ['eventBus'],\n  computed: {\n    elMenuCollapse() {\n      if (this.isPhone) {\n        return false\n      }\n\n      return this.isCollapse\n    },\n    asideStyle() {\n      const style = {}\n      if (this.isPhone) {\n        style.position = 'absolute'\n        style.height = `${this.clientHeight}px`\n        style.zIndex = 12\n        if (this.isCollapse === false) {\n          style.transform = `translateX(-${sideBarWidth})`\n        } else {\n          style.transform = 'translateX(0)'\n        }\n      }\n      return style\n    },\n  },\n  methods: {\n    // 控制菜单折叠\n    changeSlidebarState() {\n      this.isCollapse = !this.isCollapse\n      if (this.isCollapse) {\n        this.eventBus.$emit('removeSidebarSearch')\n      } else {\n        this.eventBus.$emit('showSidebarSearch')\n      }\n      this.foldState = !this.foldState\n    },\n    // 响应页面的宽度高度变化\n    setResize() {\n      this.clientHeight = document.body.clientHeight\n      this.clientWidth = document.body.clientWidth\n      this.$refs.appMain.$el.style.minHeight = `${this.clientHeight - totalHeight + 20}px`\n    },\n  },\n  watch: {\n    isCollapse() {\n      if (this.isPhone) {\n        // 手机模式\n        this.sideBarWidth = sideBarWidth\n        if (this.isCollapse === false) {\n          this.transX = 0\n        } else {\n          this.transX = -1 * sideBarWidth\n        }\n      } else {\n        this.transX = 0\n        this.sideBarWidth = this.isCollapse === false ? sideBarWidth : '64px'\n      }\n    },\n    $route() {\n      this.showBackTop = false\n      if (this.scrollY <= 70) {\n        // MenuTab组件高度\n        this.backTop()\n      }\n      if (this.isPhone && this.isCollapse) {\n        this.changeSlidebarState()\n      }\n    },\n  },\n  components: {\n    NavBar,\n    SideBar,\n    AppMain,\n    ReuseTab,\n    MenuTab,\n    BackTop,\n  },\n  beforeDestroy() {\n    this.eventBus.$off('noReuse')\n    this.eventBus.$off('hasReuse')\n  },\n}\n",null]}