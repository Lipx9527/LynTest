{"remainingRequest":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/lyn/Desktop/lyntest/lyntest-vue/src/component/base/tinymce/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/src/component/base/tinymce/index.vue","mtime":1606834545505},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lyn/Desktop/lyntest/lyntest-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n\n// eslint-disable-next-line\nimport tinymce from 'tinymce/tinymce'\nimport Editor from '@tinymce/tinymce-vue'\nimport 'tinymce/themes/silver'\nimport './import-all'\n\nexport default {\n  name: 'TinymceEditor',\n  props: {\n    defaultContent: {\n      type: String,\n      default: '',\n    },\n    height: {\n      type: Number,\n      default: 500,\n    },\n    width: {\n      type: Number,\n      default: undefined,\n    },\n    upload_url: {\n      type: String,\n      default: '',\n    },\n    showMenubar: {\n      type: Boolean,\n      default: true,\n    },\n    toolbar: {\n      type: String,\n      default: ` undo redo \n      | formatselect \n      | bold italic strikethrough forecolor backcolor formatpainter \n      | link image | alignleft aligncenter alignright alignjustify \n      | numlist bullist outdent indent \n      | removeformat \n      | preview fullscreen code`,\n    },\n    baseUrl: {\n      type: String,\n      default: '',\n    },\n  },\n  components: {\n    Editor,\n  },\n  data() {\n    return {\n      tinymceFlag: 1,\n      tinymceInit: {},\n      content: '',\n    }\n  },\n  created() {\n    const _this = this\n    this.tinymceInit = {\n      language_url: `${this.baseUrl}/tinymce/langs/zh_CN.js`,\n      skin_url: `${this.baseUrl}/tinymce/skins/ui/oxide`,\n      content_css: `${this.baseUrl}/tinymce/skins/content/default/content.css`,\n      language: 'zh_CN',\n      height: this.height,\n      width: undefined,\n      browser_spellcheck: true, // 拼写检查\n      branding: false, // 去水印\n      elementpath: false, // 禁用编辑器底部的状态栏\n      statusbar: false, // 隐藏编辑器底部的状态栏\n      paste_data_images: true, // 允许粘贴图像\n      menubar: this.showMenubar, // 隐藏最上方menu\n      plugins: `print fullpage searchreplace autolink directionality visualblocks \n        visualchars template codesample charmap hr pagebreak nonbreaking anchor toc insertdatetime \n        wordcount textpattern help advlist table lists paste preview fullscreen image imagetools code link`,\n      toolbar: this.toolbar,\n      async images_upload_handler(blobInfo, success, failure) {\n        const file = new File([blobInfo.blob()], blobInfo.filename(), {\n          type: 'image/*',\n        })\n        _this\n          .$axios({\n            method: 'post',\n            url: '/cms/file',\n            data: {\n              file,\n            },\n          })\n          .then(res => {\n            if (res[0] && res[0].url) {\n              success(res[0].url)\n            }\n          })\n          .catch(err => failure(err))\n      },\n    }\n  },\n  mounted() {\n    if (this.defaultContent) {\n      this.content = this.defaultContent\n    }\n  },\n  watch: {\n    content: {\n      handler() {\n        this.$emit('change', this.content)\n      },\n    },\n    defaultContent: {\n      handler() {\n        this.content = this.defaultContent\n      },\n      immediate: true,\n    },\n  },\n  activated() {\n    this.tinymceFlag++\n  },\n}\n",null]}